<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">

      <!-- === Basic SEO === -->
      <title>KFC Delivery Marrakech</title>
      <meta name="description" content="Best fried chicken in Marrakech: Order from KFC Delivery and enjoy crispy chicken, burgers, and sides. Fast delivery to your door. Exclusive online offers.">
      <meta name="keywords" content="KFC Marrakech, Fried chicken delivery Marrakech, Best fried chicken Marrakech, Order KFC online Marrakech">
      <meta name="author" content="KFC Marrakech">
      <meta name="robots" content="index, follow">
      <link rel="canonical" href="https://www.delivery-marrakech.com/">

      <!-- === Favicon === -->
      <link rel="icon" type="image/png" href="https://i.ibb.co/KpZZdGsM/Logo-of-benjelloun-express.jpg">
      <link rel="apple-touch-icon" href="https://i.ibb.co/KpZZdGsM/Logo-of-benjelloun-express.jpg">

      <!-- === Open Graph Cards === -->
      <meta property="og:title" content="KFC Delivery Marrakech | Order Online">
      <meta property="og:description" content="Enjoy the tastiest fried chicken in Marrakech with fast delivery. Exclusive offers for online orders.">
      <meta property="og:image" content="https://i.ibb.co/0VZXFKTk/IMG-3736.jpg">
      <meta property="og:image:width" content="1200">
      <meta property="og:image:height" content="630">
      <meta property="og:url" content="https://www.delivery-marrakech.com/">
      <meta property="og:type" content="website">
      <meta property="og:locale" content="en_US">
      <meta property="og:site_name" content="KFC Marrakech">

      <!-- === Twitter Card === -->
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:title" content="KFC Delivery Marrakech">
      <meta name="twitter:description" content="Order your favorite fried chicken in Marrakech and enjoy fast delivery.">
      <meta name="twitter:image" content="https://i.ibb.co/0VZXFKTk/IMG-3736.jpg">
      <meta name="twitter:site" content="@KFCMa">

      <!-- === Schema.org markup for Restaurant === -->
      <script type="application/ld+json">
            {
                  "@context": "https://schema.org",
                  "@type": "Restaurant",
                  "name": "KFC Delivery Marrakech",
                  "image": "https://i.ibb.co/0VZXFKTk/IMG-3736.jpg",
                  "url": "https://www.delivery-marrakech.com/",
                  "telephone": "+212-524-XXX-XXX",
                  "priceRange": "$$",
                  "address": {
                        "@type": "PostalAddress",
                        "streetAddress": "Avenue Mohamed V, Gueliz",
                        "addressLocality": "Marrakech",
                        "addressRegion": "Marrakech-Safi",
                        "postalCode": "40000",
                        "addressCountry": "MA"
                  },
                  "geo": {
                        "@type": "GeoCoordinates",
                        "latitude": 31.6295,
                        "longitude": -8.0083
                  },
                  "openingHoursSpecification": [{
                        "@type": "OpeningHoursSpecification",
                        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                        "opens": "11:00",
                        "closes": "23:00"
                  }],
                  "servesCuisine": ["Fried Chicken", "American", "Fast Food"],
                  "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "4.6",
                        "reviewCount": "512"
                  },
                  "offers": {
                        "@type": "Offer",
                        "url": "https://www.delivery-marrakech.com/",
                        "priceCurrency": "MAD",
                        "availability": "https://schema.org/InStock"
                  }
            }
      </script>

      <!-- === Hreflang links === -->
      <link rel="alternate" href="https://www.delivery-marrakech.com/ar/" hreflang="ar">
      <link rel="alternate" href="https://www.delivery-marrakech.com/fr/" hreflang="fr">
      <link rel="alternate" href="https://www.delivery-marrakech.com/en/" hreflang="en">

      <!-- === Fonts & Icons === -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
      <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">

      <style>
            /* All original styles are kept exactly as before, plus new modal styles */
            * {
                  margin: 0;
                  padding: 0;
                  box-sizing: border-box;
                  font-family: 'Ubuntu', sans-serif;
            }

            body {
                  background-color: #f8f8f8;
                  color: #333;
                  max-width: 400px;
                  margin: 0 auto;
                  padding: 0;
                  min-height: 100vh;
                  position: relative;
            }

            /* Top Navigation Bar */
            .navbar {
                  position: fixed;
                  top: 0;
                  width: 100%;
                  max-width: 400px;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 16px;
                  background-color: transparent;
                  z-index: 1000;
                  transition: all 0.3s ease;
            }

            .navbar.scrolled {
                  background-color: white;
                  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .navbar.scrolled .nav-title {
                  display: block;
            }

            .nav-btn {
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  background-color: white;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  border: none;
                  color: #8B0000;
                  font-size: 16px;
                  transition: all 0.2s ease;
                  cursor: pointer;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .nav-btn:active {
                  transform: scale(0.95);
            }

            .nav-title {
                  display: none;
                  font-weight: 700;
                  color: #8B0000;
                  position: absolute;
                  left: 50%;
                  transform: translateX(-50%);
                  font-size: 18px;
            }

            /* Hero Image */
            .hero-section {
                  position: relative;
                  height: 220px;
                  overflow: hidden;
            }

            .hero-image {
                  width: 100%;
                  height: 100%;
                  object-fit: cover;
            }

            .hero-overlay {
                  position: absolute;
                  bottom: 0;
                  left: 0;
                  right: 0;
                  background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
                  padding: 20px 16px 16px;
                  color: white;
            }

            .hero-title {
                  font-size: 24px;
                  font-weight: 700;
                  margin-bottom: 4px;
            }

            .hero-subtitle {
                  font-size: 14px;
                  opacity: 0.9;
            }

            /* Restaurant Info */
            .restaurant-info {
                  padding: 20px 16px;
                  background-color: white;
                  border-radius: 0 0 16px 16px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                  margin-bottom: 8px;
            }

            .restaurant-name {
                  font-size: 24px;
                  font-weight: 700;
                  margin-bottom: 12px;
                  color: #8B0000;
            }

            .rating-delivery {
                  display: flex;
                  align-items: center;
                  margin-bottom: 8px;
                  flex-wrap: wrap;
                  gap: 16px;
            }

            .rating {
                  display: flex;
                  align-items: center;
                  padding: 6px 12px;
                  background: #FFF5F5;
                  border-radius: 20px;
            }

            .rating-value {
                  font-weight: 700;
                  margin-right: 4px;
                  color: #8B0000;
            }

            .delivery-time {
                  display: flex;
                  align-items: center;
                  padding: 6px 12px;
                  background: #F8F9FA;
                  border-radius: 20px;
                  color: #495057;
            }

            .delivery-icon {
                  margin-right: 6px;
                  color: #8B0000;
            }

            /* Categories Section */
            .categories-section {
                  padding: 16px;
                  background-color: white;
                  margin-bottom: 8px;
                  position: sticky;
                  top: 72px;
                  z-index: 900;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
                  transition: all 0.3s ease;
            }

            .categories {
                  display: flex;
                  overflow-x: auto;
                  gap: 8px;
                  padding-bottom: 4px;
                  scrollbar-width: none;
                  scroll-behavior: smooth;
            }

            .categories::-webkit-scrollbar {
                  display: none;
            }

            .category {
                  padding: 12px 18px;
                  background: #F8F9FA;
                  border-radius: 12px;
                  white-space: nowrap;
                  font-size: 14px;
                  font-weight: 500;
                  color: #495057;
                  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                  cursor: pointer;
                  position: relative;
                  overflow: hidden;
                  border: 1px solid #E9ECEF;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  min-width: max-content;
                  will-change: transform, background, color;
            }

            .category::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  background: linear-gradient(135deg, #8B0000 0%, #6D0000 100%);
                  border-radius: 12px;
                  opacity: 0;
                  transition: opacity 0.3s ease;
                  z-index: -1;
            }

            .category.active {
                  color: white;
                  transform: scale(1.05);
                  box-shadow: 0 4px 12px rgba(139, 0, 0, 0.25);
                  border-color: #8B0000;
                  font-weight: 600;
            }

            .category.active::before {
                  opacity: 1;
            }

            .category.highlight {
                  animation: pulse 0.5s ease;
            }

            @keyframes pulse {
                  0% {
                        transform: scale(1);
                  }

                  50% {
                        transform: scale(1.08);
                  }

                  100% {
                        transform: scale(1.05);
                  }
            }

            /* Offers Section */
            .offers-section {
                  padding: 20px 16px;
                  background-color: white;
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                  margin-bottom: 8px;
            }

            .section-title {
                  font-size: 20px;
                  font-weight: 700;
                  margin-bottom: 16px;
                  color: #212529;
                  display: flex;
                  align-items: center;
            }

            .section-title::after {
                  content: "";
                  flex: 1;
                  height: 1px;
                  background: #DEE2E6;
                  margin-left: 12px;
            }

            .offer-cards {
                  display: flex;
                  overflow-x: auto;
                  gap: 16px;
                  padding: 8px 4px 16px 4px;
                  scrollbar-width: none;
            }

            .offer-cards::-webkit-scrollbar {
                  display: none;
            }

            .offer-card {
                  min-width: 280px;
                  height: 140px;
                  border-radius: 16px;
                  overflow: hidden;
                  background-color: white;
                  display: flex;
                  position: relative;
                  box-shadow: 0 6px 15px rgba(139, 0, 0, 0.2);
                  transition: transform 0.3s ease;
            }

            .offer-card:hover {
                  transform: translateY(-5px);
            }

            .offer-content {
                  padding: 20px;
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
            }

            .offer-title {
                  font-weight: 700;
                  font-size: 18px;
                  background: linear-gradient(135deg, #FFCCCB 5%, #8B0000 15%, black 100%);
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent;
                  margin-bottom: 8px;
            }

            .offer-desc {
                  font-size: 14px;
                  color: gray;
                  margin-bottom: 16px;
            }

            .offer-button {
                  padding: 8px 16px;
                  background: #8B0000;
                  color: white;
                  border-radius: 20px;
                  font-weight: 600;
                  font-size: 14px;
                  width: fit-content;
                  transition: all 0.2s ease;
                  cursor: pointer;
            }

            .offer-button:active {
                  transform: scale(0.95);
            }

            .offer-image {
                  width: 40%;
                  height: 100%;
                  object-fit: cover;
            }

            /* Products Section */
            .products-section {
                  padding: 20px 16px;
                  background-color: white;
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                  margin-bottom: 20px;
            }

            .product-cards {
                  display: flex;
                  overflow-x: auto;
                  gap: 16px;
                  padding-bottom: 8px;
                  scrollbar-width: none;
            }

            .product-cards::-webkit-scrollbar {
                  display: none;
            }

            .product-card {
                  min-width: 160px;
                  border-radius: 16px;
                  overflow: hidden;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
                  background: white;
                  transition: transform 0.2s ease;
            }

            .product-card:active {
                  transform: scale(0.98);
            }

            .product-image-container {
                  height: 120px;
                  position: relative;
            }

            .product-image {
                  width: 100%;
                  height: 100%;
                  object-fit: cover;
            }

            .add-btn {
                  position: absolute;
                  bottom: -16px;
                  right: 16px;
                  width: 36px;
                  height: 36px;
                  border-radius: 50%;
                  background: linear-gradient(135deg, #8B0000 0%, #6D0000 100%);
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  box-shadow: 0 4px 10px rgba(139, 0, 0, 0.3);
                  color: white;
                  font-weight: bold;
                  font-size: 18px;
                  border: none;
                  cursor: pointer;
                  transition: all 0.2s ease;
                  z-index: 10;
            }

            .add-btn:active {
                  transform: scale(0.9);
            }

            .product-info {
                  padding: 24px 12px 12px;
            }

            .product-name {
                  font-weight: 700;
                  font-size: 16px;
                  margin-bottom: 6px;
                  color: #212529;
            }

            .product-description {
                  font-size: 13px;
                  color: #6C757D;
                  margin-bottom: 8px;
                  line-height: 1.4;
            }

            .product-price {
                  font-weight: 700;
                  color: #000000;
                  font-size: 16px;
                  display: flex;
                  flex-direction: column;
                  gap: 4px;
            }

            .price-item {
                  display: flex;
                  justify-content: space-between;
                  font-size: 14px;
            }

            .size-label {
                  color: #6C757D;
            }

            .size-price {
                  color: #8B0000;
            }

            /* Category Items Section */
            .category-items-section {
                  padding: 20px 16px;
                  background-color: white;
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                  margin-bottom: 16px;
                  scroll-margin-top: 120px;
                  opacity: 0;
                  transform: translateY(20px);
                  transition: opacity 0.5s ease, transform 0.5s ease;
            }

            .category-items-section.visible {
                  opacity: 1;
                  transform: translateY(0);
            }

            .category-header {
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  margin-bottom: 16px;
                  position: relative;
            }

            .category-item {
                  display: flex;
                  padding: 16px 0;
                  border-bottom: 1px solid #F1F3F5;
                  transition: transform 0.2s ease;
            }

            .category-item:last-child {
                  border-bottom: none;
            }

            .category-item:hover {
                  transform: translateX(5px);
            }

            .item-image {
                  width: 100px;
                  height: 100px;
                  border-radius: 12px;
                  object-fit: cover;
                  margin-right: 16px;
                  transition: transform 0.3s ease;
            }

            .category-item:hover .item-image {
                  transform: scale(1.05);
            }

            .item-info {
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
            }

            .item-name {
                  font-weight: 600;
                  font-size: 16px;
                  margin-bottom: 6px;
                  color: #212529;
            }

            .item-description {
                  font-size: 13px;
                  color: #6C757D;
                  margin-bottom: 12px;
                  line-height: 1.4;
            }

            .item-footer {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
            }

            .item-price {
                  font-weight: 700;
                  color: #000000;
                  font-size: 16px;
                  display: flex;
                  flex-direction: column;
                  gap: 4px;
            }

            .price-size {
                  display: flex;
                  font-size: 14px;
                  gap: 8px;
            }

            .size-text {
                  color: #6C757D;
            }

            .price-amount {
                  color: #8B0000;
            }

            .item-add-btn {
                  width: 36px;
                  height: 36px;
                  border-radius: 50%;
                  background: linear-gradient(135deg, #8B0000 0%, #6D0000 100%);
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  box-shadow: 0 4px 10px rgba(139, 0, 0, 0.3);
                  color: white;
                  font-weight: bold;
                  font-size: 18px;
                  border: none;
                  cursor: pointer;
                  transition: all 0.2s ease;
            }

            .item-add-btn:active {
                  transform: scale(0.9);
            }

            /* Animation for navbar transition */
            @keyframes fadeIn {
                  from {
                        opacity: 0;
                  }

                  to {
                        opacity: 1;
                  }
            }

            .navbar.scrolled .nav-title {
                  animation: fadeIn 0.3s ease;
            }

            /* Observer animation for sections */
            @keyframes slideIn {
                  from {
                        opacity: 0;
                        transform: translateY(30px);
                  }

                  to {
                        opacity: 1;
                        transform: translateY(0);
                  }
            }

            .animate-section {
                  animation: slideIn 0.6s ease forwards;
            }

            /* New animations for categories */
            @keyframes slideInFromLeft {
                  from {
                        opacity: 0;
                        transform: translateX(-20px);
                  }

                  to {
                        opacity: 1;
                        transform: translateX(0);
                  }
            }

            @keyframes slideInFromRight {
                  from {
                        opacity: 0;
                        transform: translateX(20px);
                  }

                  to {
                        opacity: 1;
                        transform: translateX(0);
                  }
            }

            .category.slide-in-left {
                  animation: slideInFromLeft 0.4s ease forwards;
            }

            .category.slide-in-right {
                  animation: slideInFromRight 0.4s ease forwards;
            }

            /* View Cart Button */
            .view-cart-btn {
                  position: fixed;
                  bottom: 20px;
                  left: 50%;
                  transform: translateX(-50%);
                  background-color: #8B0000;
                  color: white;
                  border: none;
                  border-radius: 30px;
                  padding: 12px 25px;
                  font-weight: bold;
                  font-size: 16px;
                  cursor: pointer;
                  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  transition: all 0.3s;
                  z-index: 1000;
            }

            .view-cart-btn:hover {
                  background-color: #660000;
                  transform: translateX(-50%) translateY(-2px);
            }

            .cart-item-count {
                  background: #fff;
                  color: #8B0000;
                  border-radius: 50%;
                  width: 24px;
                  height: 24px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  font-size: 14px;
                  font-weight: bold;
            }

            /* Stars animation - now white */
            @keyframes starAnimation {
                  0% {
                        opacity: 0;
                        transform: translate(0, 0) scale(0.5);
                  }

                  50% {
                        opacity: 1;
                        transform: translate(var(--tx), var(--ty)) scale(1.2);
                  }

                  100% {
                        opacity: 0;
                        transform: translate(var(--tx), var(--ty)) scale(1);
                  }
            }

            .star {
                  position: absolute;
                  color: white;
                  font-size: 12px;
                  opacity: 0;
                  pointer-events: none;
                  z-index: 9999;
                  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            }

            /* Flying element for add animation */
            .flying-element {
                  position: fixed;
                  width: 30px;
                  height: 30px;
                  background-color: #8B0000;
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                  font-size: 18px;
                  font-weight: bold;
                  box-shadow: 0 0 15px rgba(139, 0, 0, 0.7);
                  z-index: 9999;
                  pointer-events: none;
                  transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                  will-change: transform;
            }

            .flying-element::after {
                  content: '+';
            }

            /* Overlay */
            .overlay {
                  position: fixed;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  background: rgba(0, 0, 0, 0.7);
                  display: none;
                  justify-content: center;
                  align-items: center;
                  z-index: 2000;
                  backdrop-filter: blur(10px);
                  padding: 12px;
            }

            /* Modal */
            .modal {
                  background: #ffffff;
                  width: 100%;
                  max-width: 500px;
                  max-height: 90vh;
                  overflow: hidden;
                  border-radius: 40px;
                  box-shadow: 0 40px 80px rgba(0, 0, 0, 0.4);
                  display: flex;
                  flex-direction: column;
                  animation: modalRise 0.5s cubic-bezier(0.2, 0.9, 0.3, 1) forwards;
            }

            @keyframes modalRise {
                  from {
                        opacity: 0;
                        transform: translateY(80px) scale(0.9);
                  }

                  to {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                  }
            }

            /* Header */
            .modal-header {
                  position: sticky;
                  top: 0;
                  background: rgba(255, 255, 255, 0.9);
                  backdrop-filter: blur(10px);
                  padding: 16px 24px;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
                  z-index: 10;
            }

            .modal-title {
                  font-size: 18px;
                  font-weight: 600;
                  color: #111827;
            }

            .close-btn {
                  background: #f3f4f6;
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  cursor: pointer;
                  transition: all 0.2s ease;
                  color: #4b5563;
            }

            .close-btn:hover {
                  background: #8b0000;
                  color: white;
                  transform: rotate(90deg);
            }

            /* Scrollable content */
            .modal-content {
                  padding: 24px;
                  overflow-y: auto;
                  flex-grow: 1;
                  scrollbar-width: thin;
                  -webkit-overflow-scrolling: touch;
            }

            /* Hero image */
            .modal-image {
                  width: 100%;
                  height: 250px;
                  object-fit: cover;
                  border-radius: 28px;
                  margin-bottom: 20px;
                  box-shadow: 0 20px 30px -10px rgba(0, 0, 0, 0.2);
            }

            .modal-item-title {
                  font-size: 28px;
                  font-weight: 700;
                  color: #111827;
                  margin-bottom: 4px;
                  letter-spacing: -0.5px;
            }

            .modal-desc {
                  color: #6b7280;
                  font-size: 14px;
                  line-height: 1.5;
                  margin-bottom: 24px;
            }

            /* Section title */
            .section-title-modal {
                  font-size: 16px;
                  font-weight: 600;
                  color: #111827;
                  margin: 28px 0 16px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
            }

            .section-title-modal i {
                  color: #8b0000;
                  font-size: 18px;
            }

            /* ===== SLIDER FLAVOUR SELECTOR (للمنتجات ذات القطع) ===== */
            .flavour-balance {
                  background: linear-gradient(145deg, #fafafa, #f5f5f5);
                  border-radius: 48px;
                  padding: 24px 20px 32px;
                  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02), 0 10px 20px -10px rgba(0, 0, 0, 0.1);
                  margin-bottom: 10px;
            }

            .flavour-labels {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 16px;
            }

            .flavour-side {
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  gap: 4px;
            }

            .flavour-side img {
                  width: 70px;
                  height: 70px;
                  object-fit: cover;
                  border-radius: 35px;
                  border: 3px solid white;
                  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
            }

            .flavour-side span {
                  font-weight: 600;
                  font-size: 14px;
                  color: #374151;
            }

            .flavour-side .quantity {
                  font-size: 26px;
                  font-weight: 800;
                  color: #8b0000;
                  background: white;
                  padding: 4px 12px;
                  border-radius: 40px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
                  margin-top: 4px;
            }

            .flavour-side .pieces-label {
                  font-size: 12px;
                  font-weight: 700;
                  text-transform: lowercase;
                  margin-top: 2px;
            }

            .pieces-label.spicy {
                  color: #8b0000;
            }

            .pieces-label.original {
                  color: #b45309;
            }

            .vs-divider {
                  font-size: 18px;
                  font-weight: 600;
                  color: #9ca3af;
                  background: white;
                  width: 48px;
                  height: 48px;
                  border-radius: 30px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            }

            .slider-container {
                  position: relative;
                  margin: 24px 0 10px;
            }

            .slider-track {
                  width: 100%;
                  height: 10px;
                  border-radius: 20px;
                  position: relative;
                  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
            }

            input[type=range] {
                  -webkit-appearance: none;
                  width: 100%;
                  background: transparent;
                  position: absolute;
                  top: -5px;
                  left: 0;
                  height: 20px;
            }

            input[type=range]::-webkit-slider-thumb {
                  -webkit-appearance: none;
                  width: 28px;
                  height: 28px;
                  background: white;
                  border-radius: 50%;
                  box-shadow: 0 4px 12px rgba(139, 0, 0, 0.5), 0 0 0 2px white, 0 0 0 4px #8b0000;
                  cursor: pointer;
                  transition: 0.1s;
                  margin-top: -9px;
            }

            input[type=range]::-webkit-slider-thumb:hover {
                  transform: scale(1.15);
                  box-shadow: 0 6px 16px rgba(139, 0, 0, 0.7), 0 0 0 2px white, 0 0 0 4px #8b0000;
            }

            /* ===== أنماط مودال Combo Meals (الإضافات) ===== */
            .flavour-row {
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  gap: 15px;
                  margin: 10px 0 25px;
            }

            .flavour-option {
                  flex: 0 1 auto;
                  background: #F1F3F4;
                  border-radius: 40px;
                  padding: 10px 28px;
                  font-weight: 600;
                  font-size: 16px;
                  color: #2C3E50;
                  cursor: pointer;
                  border: 2px solid transparent;
                  transition: all 0.2s;
                  user-select: none;
                  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            }

            .flavour-option.active {
                  background: #8b0000;
                  color: white;
                  border-color: #8b0000;
                  box-shadow: 0 4px 10px rgba(139, 0, 0, 0.3);
            }

            .flavour-or {
                  font-weight: 700;
                  color: #95A5A6;
                  font-size: 18px;
            }

            .extra-heading {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-weight: 600;
                  font-size: 18px;
                  color: #1e1e1e;
                  margin: 20px 0 15px;
                  border-bottom: 2px dashed #8b0000;
                  padding-bottom: 8px;
            }

            .extra-heading i {
                  color: #8b0000;
                  font-size: 22px;
            }

            .optional-text {
                  font-size: 14px;
                  font-weight: 400;
                  color: #8e8e8e;
                  margin-left: 5px;
            }

            .chicken-row {
                  display: flex;
                  flex-direction: row;
                  flex-wrap: nowrap;
                  gap: 12px;
                  margin-bottom: 20px;
                  justify-content: center;
            }

            .chicken-card {
                  flex: 1 1 0;
                  min-width: 0;
                  background: white;
                  border: 2px solid #ECF0F1;
                  border-radius: 16px;
                  padding: 12px 6px 12px;
                  text-align: center;
                  transition: 0.2s;
                  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);
            }

            .chicken-card:hover {
                  border-color: #8b0000;
                  background: #FFF5F5;
            }

            .chicken-img {
                  width: 100%;
                  height: 100px;
                  object-fit: contain;
                  background: white;
                  border-radius: 12px;
                  margin-bottom: 8px;
                  padding: 4px;
            }

            .chicken-name {
                  font-weight: 700;
                  font-size: 0.95rem;
                  color: #2C3E50;
                  margin-bottom: 4px;
                  white-space: nowrap;
                  overflow: hidden;
                  text-overflow: ellipsis;
            }

            .chicken-subtotal {
                  font-weight: 700;
                  color: #8b0000;
                  font-size: 1.1rem;
                  margin: 6px 0 2px;
                  min-height: 26px;
            }

            .unit-hint {
                  font-size: 11px;
                  color: #95A5A6;
                  margin-bottom: 8px;
            }

            .item-counter {
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  gap: 10px;
                  margin-top: 5px;
            }

            .item-counter .counter-btn {
                  width: 36px;
                  height: 36px;
                  border-radius: 50%;
                  border: none;
                  background: #F9F9F9;
                  color: #2C3E50;
                  font-size: 18px;
                  font-weight: bold;
                  cursor: pointer;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  transition: all 0.2s ease;
                  display: inline-flex;
                  align-items: center;
                  justify-content: center;
            }

            .item-counter .counter-btn:hover {
                  background: #8b0000;
                  color: white;
                  transform: scale(1.1);
            }

            .item-counter .item-qty {
                  font-weight: 700;
                  font-size: 18px;
                  min-width: 30px;
                  text-align: center;
            }

            .drink-group {
                  background: #F9F9F9;
                  border-radius: 16px;
                  padding: 15px;
                  border: 1px solid #ECF0F1;
                  margin: 20px 0;
            }

            .drink-options {
                  display: flex;
                  flex-wrap: wrap;
                  gap: 12px;
                  margin-top: 10px;
            }

            .drink-option {
                  display: flex;
                  align-items: center;
                  gap: 6px;
                  cursor: pointer;
                  background: white;
                  padding: 8px 16px;
                  border-radius: 40px;
                  border: 1px solid #ddd;
                  transition: 0.2s;
                  flex: 0 1 auto;
            }

            .drink-option.selected {
                  border-color: #8b0000;
                  background: #ffeae9;
            }

            .drink-option input[type="radio"] {
                  accent-color: #8b0000;
                  width: 18px;
                  height: 18px;
                  margin: 0;
            }

            .drink-name {
                  font-weight: 500;
                  font-size: 15px;
            }

            /* إصلاح عرض الصور داخل خيارات المشروبات */
            .drink-option img {
                  width: 24px;
                  height: 24px;
                  object-fit: cover;
                  border-radius: 4px;
            }

            /* نفس الإصلاح للصورة في صف المشروبات (في مودال السلايدر) */
            .drink-image {
                  width: 24px;
                  height: 24px;
                  object-fit: cover;
                  border-radius: 4px;
            }

            /* صف المشروبات في مودال السلايدر */
            .drinks-row {
                  display: flex;
                  flex-wrap: wrap;
                  gap: 12px;
                  margin-bottom: 20px;
            }

            .drinks-row .drink-option {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  padding: 8px 12px;
                  border-radius: 40px;
                  border: 1px solid #ddd;
                  background: white;
                  cursor: pointer;
            }

            .drinks-row .drink-option.selected {
                  border-color: #8b0000;
                  background: #ffeae9;
            }

            .drinks-row .drink-image {
                  width: 24px;
                  height: 24px;
                  object-fit: cover;
            }

            .special-instructions {
                  width: 100%;
                  padding: 16px 18px;
                  border: 1px solid #e5e7eb;
                  border-radius: 30px;
                  font-size: 14px;
                  resize: none;
                  outline: none;
                  transition: all 0.2s ease;
                  background: white;
                  color: #1f2937;
            }

            .special-instructions:focus {
                  border-color: #8b0000;
                  box-shadow: 0 0 0 4px rgba(139, 0, 0, 0.1);
            }

            .char-counter {
                  display: flex;
                  justify-content: space-between;
                  font-size: 12px;
                  color: #9ca3af;
                  margin-top: 6px;
            }

            /* Fixed footer */
            .fixed-footer {
                  background: white;
                  padding: 16px 24px;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  border-top: 1px solid rgba(0, 0, 0, 0.05);
                  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.02);
            }

            .counter {
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  background: #f9fafb;
                  padding: 6px 12px;
                  border-radius: 60px;
            }

            .counter .counter-btn {
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  border: none;
                  background: white;
                  color: #1f2937;
                  font-size: 16px;
                  cursor: pointer;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  transition: all 0.2s ease;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            }

            .counter .counter-btn:hover {
                  background: #8b0000;
                  color: white;
                  transform: scale(1.1);
            }

            .counter .counter-value {
                  font-weight: 600;
                  font-size: 18px;
                  min-width: 28px;
                  text-align: center;
            }

            .modal-add-btn {
                  background: linear-gradient(145deg, #8b0000, #a50000);
                  color: white;
                  border: none;
                  padding: 10px 20px;
                  border-radius: 50px;
                  font-weight: 600;
                  font-size: 14px;
                  cursor: pointer;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  box-shadow: 0 12px 20px -8px rgba(139, 0, 0, 0.5);
                  transition: all 0.3s ease;
                  white-space: nowrap;
            }

            .modal-add-btn:hover {
                  transform: translateY(-3px);
                  box-shadow: 0 18px 25px -8px rgba(139, 0, 0, 0.6);
            }

            .price {
                  font-weight: 700;
                  font-size: 16px;
            }

            .global-counter {
                  display: flex;
                  align-items: center;
                  gap: 15px;
                  background: transparent;
                  padding: 0;
                  border-radius: 0;
                  box-shadow: none;
            }

            .global-counter .counter-btn {
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  border: none;
                  background: #F9F9F9;
                  color: #2C3E50;
                  font-size: 18px;
                  font-weight: normal;
                  cursor: pointer;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  transition: all 0.2s ease;
                  display: flex;
                  align-items: center;
                  justify-content: center;
            }

            .global-counter .counter-btn:hover {
                  background: #8b0000;
                  color: white;
                  transform: scale(1.1);
            }

            .global-counter .global-qty {
                  font-weight: 700;
                  font-size: 18px;
                  min-width: 30px;
                  text-align: center;
            }

            /* Small screen adjustments */
            @media (max-width: 400px) {
                  .modal-content {
                        padding: 18px;
                  }

                  .flavour-side img {
                        width: 60px;
                        height: 60px;
                  }

                  .flavour-side .quantity {
                        font-size: 22px;
                  }

                  .vs-divider {
                        width: 40px;
                        height: 40px;
                  }
            }

            /* Existing search modal styles - keep as before */
            .search-modal {
                  background: white;
                  width: 100%;
                  max-width: 500px;
                  max-height: 80vh;
                  overflow: hidden;
                  border-radius: 20px;
                  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
                  display: flex;
                  flex-direction: column;
                  animation: modalAppear 0.4s ease forwards;
            }

            .search-header {
                  position: sticky;
                  top: 0;
                  background: white;
                  padding: 15px 20px;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  border-bottom: 1px solid #ECF0F1;
                  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
                  z-index: 100;
            }

            .search-input-container {
                  display: flex;
                  align-items: center;
                  width: 100%;
                  background: #F9F9F9;
                  border-radius: 25px;
                  padding: 10px 15px;
                  margin-right: 10px;
            }

            .search-input {
                  border: none;
                  background: transparent;
                  width: 100%;
                  font-size: 16px;
                  outline: none;
            }

            .search-results {
                  padding: 15px;
                  overflow-y: auto;
                  flex-grow: 1;
            }

            .search-result-item {
                  display: flex;
                  padding: 12px 0;
                  border-bottom: 1px solid #ECF0F1;
                  cursor: pointer;
                  transition: background-color 0.2s;
            }

            .search-result-item:hover {
                  background-color: #F9F9F9;
            }

            .search-result-image {
                  width: 60px;
                  height: 60px;
                  border-radius: 10px;
                  object-fit: cover;
                  margin-right: 15px;
            }

            .search-result-info {
                  flex: 1;
            }

            .search-result-name {
                  font-weight: 600;
                  margin-bottom: 5px;
            }

            .search-result-price {
                  color: #8B0000;
                  font-weight: 700;
            }

            .no-results {
                  text-align: center;
                  padding: 20px;
                  color: #7F8C8D;
            }

            /* Share Modal Styles */
            .share-modal {
                  background: white;
                  width: 100%;
                  max-width: 500px;
                  max-height: 80vh;
                  overflow: hidden;
                  border-radius: 20px;
                  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
                  display: flex;
                  flex-direction: column;
                  animation: modalAppear 0.4s ease forwards;
            }

            .share-options {
                  padding: 20px;
                  display: flex;
                  flex-direction: column;
                  gap: 15px;
            }

            .share-option {
                  display: flex;
                  align-items: center;
                  padding: 15px;
                  background: #F9F9F9;
                  border-radius: 12px;
                  cursor: pointer;
                  transition: all 0.3s ease;
            }

            .share-option:hover {
                  background: #8B0000;
                  color: white;
                  transform: translateX(5px);
            }

            .share-option:hover .share-icon {
                  background: white;
                  color: #8B0000;
            }

            .share-icon {
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  background: #8B0000;
                  color: white;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-right: 15px;
                  transition: all 0.3s ease;
            }

            .share-text {
                  font-weight: 500;
                  font-size: 16px;
            }
      </style>
</head>

<body>
      <!-- Top Navigation Bar -->
      <nav class="navbar" id="navbar">
            <button class="nav-btn" id="backButton">
                  <i class="fas fa-arrow-left"></i>
            </button>
            <div class="nav-title">KFC</div>
            <div style="display: flex; gap: 12px;">
                  <button class="nav-btn" id="searchButton">
                        <i class="fas fa-search"></i>
                  </button>
                  <button class="nav-btn" id="shareButton">
                        <i class="fas fa-share-alt"></i>
                  </button>
            </div>
      </nav>

      <!-- Hero Image -->
      <div class="hero-section">
            <img src="https://img.cdn4dd.com/cdn-cgi/image/fit=cover,width=600,height=400,format=auto,quality=80/https://doordash-static.s3.amazonaws.com/media/store/header/8ff99d61-2170-4ff4-bbd2-55370c49ba3d.png" alt="KFC Storefront" class="hero-image">
            <div class="hero-overlay">
                  <h1 class="hero-title">KFC Delivery Menu</h1>
                  <p class="hero-subtitle">Order KFC crispy chicken in Marrakech! Enjoy fresh chicken meals, burgers, sides and drinks. Fast delivery to your door.</p>
            </div>
      </div>

      <!-- Restaurant Info -->
      <div class="restaurant-info">
            <h1 class="restaurant-name">KFC Delivery Marrakech</h1>
            <div class="rating-delivery">
                  
                  <div class="delivery-time">
                        <i class="fas fa-motorcycle delivery-icon"></i>
                        <span>25-35 min</span>
                  </div>
            </div>
      </div>

      <!-- Categories Section (مُحدّثة لتشمل SIDES و DRINKS) -->
      <div class="categories-section" id="categoriesSection">
            <div class="categories" id="categoriesContainer">
                  <div class="category active" data-category="chickenMeals">CHICKEN MEALS</div>
                  <div class="category" data-category="hotWings">HOT WINGS</div>
                  <div class="category" data-category="loadedBuckets">LOADED BUCKETS</div>
                  <div class="category" data-category="comboMeals">COMBO MEALS</div>
                  <div class="category" data-category="familyBuckets">FAMILY BUCKETS</div>
                  <!-- فئتان جديدتان -->
                  <div class="category" data-category="sides">SIDES</div>
                  <div class="category" data-category="drinks">DRINKS</div>
            </div>
      </div>

      <!-- ========== KFC Items ========== -->

      <!-- CHICKEN MEALS Section -->
      <div class="category-items-section animate-section" id="chickenMealsSection">
            <h2 class="section-title">CHICKEN MEALS</h2>
            <div class="category-item">
                  <img src="https://i.ibb.co/TqPsCxRL/IMG-5127.png" alt="Crispy Strips Meal (4 Pcs)" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Crispy Strips Meal (4 Pcs)</div>
                        <div class="item-description">4 crispy chicken strips served with Fries, Bread, 1 Drink and 1 Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">78.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Crispy Strips Meal (4 Pcs)">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/PzCXbbZ0/IMG-5126.png" alt="Crispy Strips Meal (6 Pcs)" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Crispy Strips Meal (6 Pcs)</div>
                        <div class="item-description">6 crispy chicken strips served with Fries, Bread, 1 Drink and 1 Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">92.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Crispy Strips Meal (6 Pcs)">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/9m4Bj9nZ/IMG-5124.png" alt="Super Dinner Meal (3 Pcs)" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Super Dinner Meal (3 Pcs)</div>
                        <div class="item-description">3 pieces of crispy chicken with bone served with Fries, Bread, 1 Drink and 1 Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">85.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Super Dinner Meal (3 Pcs)">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/1GPDnFVs/IMG-5125.png" alt="Super Dinner Meal (4 Pcs)" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Super Dinner Meal (4 Pcs)</div>
                        <div class="item-description">4 pieces of crispy chicken with bone served with Fries, Bread, 1 Drink and 1 Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">95.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Super Dinner Meal (4 Pcs)">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- HOT WINGS Section -->
      <div class="category-items-section animate-section" id="hotWingsSection">
            <h2 class="section-title">HOT WINGS</h2>
            <div class="category-item">
                  <img src="https://i.ibb.co/93nQWQPX/IMG-5148.jpg" alt="Hot Wings (3 Pcs)" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Hot Wings (3 Pcs)</div>
                        <div class="item-description">3 spicy crispy hot wings, perfectly seasoned and fried.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">30.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Hot Wings (3 Pcs)">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- LOADED BUCKETS Section -->
      <div class="category-items-section animate-section" id="loadedBucketsSection">
            <h2 class="section-title">LOADED BUCKETS</h2>
            <div class="category-item">
                  <img src="https://i.ibb.co/WdK8FWh/IMG-5633.jpg" alt="Loaded Bucket 8 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Loaded Bucket 8 Pcs</div>
                        <div class="item-description">8 chicken strips served with 1L Soft Drink, 6 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">160.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Loaded Bucket 8 Pcs">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/WdK8FWh/IMG-5633.jpg" alt="Loaded Bucket 12 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Loaded Bucket 12 Pcs</div>
                        <div class="item-description">12 chicken strips served with 1L Soft Drink, 6 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">185.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Loaded Bucket 12 Pcs">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/WdK8FWh/IMG-5633.jpg" alt="Loaded Bucket 16 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Loaded Bucket 16 Pcs</div>
                        <div class="item-description">16 chicken strips served with 1.5L Soft Drink, 6 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">220.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Loaded Bucket 16 Pcs">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/WdK8FWh/IMG-5633.jpg" alt="Loaded Bucket 20 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Loaded Bucket 20 Pcs</div>
                        <div class="item-description">20 chicken strips served with 1.5L Soft Drink, 6 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">250.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Loaded Bucket 20 Pcs">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/qMypV9mH/IMG-5105.png" alt="Hotshots" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Hotshots</div>
                        <div class="item-description">Bite-sized crispy chicken pieces served with dipping sauce.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">49.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Hotshots">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- COMBO MEALS Section (with extras modal) -->
      <div class="category-items-section animate-section" id="comboMealsSection">
            <h2 class="section-title">COMBO MEALS</h2>
            <div class="category-item">
                  <img src="https://i.ibb.co/nsTffWCY/IMG-5132.png" alt="Mighty Zinger Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Mighty Zinger Combo</div>
                        <div class="item-description">Double Zinger burger served with Fries, 1 Drink</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">86.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Mighty Zinger Combo">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/0yV81F32/IMG-5137.webp" alt="Zinger Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Zinger Combo</div>
                        <div class="item-description">Classic Zinger burger served with Fries, 1 Drink</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">68.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Zinger Combo">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/Pvb90S2d/IMG-5131.png" alt="Twister Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Twister Combo</div>
                        <div class="item-description">Twister chicken wrap served with Fries, 1 Drink</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">58.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Twister Combo">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/Cpctsdz6/IMG-5129.png" alt="Supreme Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Supreme Combo</div>
                        <div class="item-description">Supreme chicken burger served with Fries, 1 Drink and</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">83.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Supreme Combo">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/ch2fcg6s/IMG-5643.png" alt="Duo Dynamite Royal" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Duo Dynamite Royal </div>
                        <div class="item-description">Royal chicken burger and Cruncher Burger with Fries, 1 Drink .</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">98.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Duo Dynamite Royal">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/cSX784dG/IMG-5642.png" alt="Mighty Royal Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Mighty Royal Combo</div>
                        <div class="item-description">Double Royal chicken burger served with Fries, 1 Drink</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">72.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Mighty Royal Combo">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/Cs2WDZTN/IMG-5644.jpg" alt="Cruncher Combo" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Cruncher Combo</div>
                        <div class="item-description">Cruncher chicken burger served with Fries, 1 Drink</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">62.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Cruncher Combo">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- FAMILY BUCKETS Section -->
      <div class="category-items-section animate-section" id="familyBucketsSection">
            <h2 class="section-title">FAMILY BUCKETS</h2>
            <div class="category-item">
                  <img src="https://i.ibb.co/3mPYmS4H/IMG-5634.png" alt="Family Bucket 8 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Family Bucket 8 Pcs</div>
                        <div class="item-description">8 pieces of chicken with bone served with 1 Family Fries, 1L Soft Drink, 3 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">195.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Family Bucket 8 Pcs">+</button>
                        </div>
                  </div>
            </div>
            <div class="category-item">
                  <img src="https://i.ibb.co/3mPYmS4H/IMG-5634.png" alt="Family Bucket 12 Pcs" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Family Bucket 12 Pcs</div>
                        <div class="item-description">12 pieces of chicken with bone served with 1 Family Fries, 1L Soft Drink, 3 Sauces and 1 Large Coleslaw.</div>
                        <div class="item-footer">
                              <div class="item-price">
                                    <div class="price-size"><span class="price-amount">225.00 MAD</span></div>
                              </div>
                              <button class="item-add-btn" data-name="Family Bucket 12 Pcs">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- ===== NEW SECTION: SIDES ===== -->
      <div class="category-items-section animate-section" id="sidesSection">
            <h2 class="section-title">SIDES</h2>
            <!-- Rizo spicy -->
            <div class="category-item">
                  <img src="https://i.ibb.co/gQrsPjN/IMG-5114.jpg" alt="Rizo spicy" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Rizo spicy</div>
                        <div class="item-description">Spicy Rizo side</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">55.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Rizo spicy">+</button>
                        </div>
                  </div>
            </div>
            <!-- Rizo original -->
            <div class="category-item">
                  <img src="https://i.ibb.co/gQrsPjN/IMG-5114.jpg" alt="Rizo original" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Rizo original</div>
                        <div class="item-description">Original Rizo side</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">55.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Rizo original">+</button>
                        </div>
                  </div>
            </div>
            <!-- Big Coleslaw -->
            <div class="category-item">
                  <img src="https://i.ibb.co/8DrW8jmZ/IMG-5112.png" alt="Big Coleslaw" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Large Coleslaw </div>
                        <div class="item-description">Large Size coleslaw </div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">22.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Big Coleslaw">+</button>
                        </div>
                  </div>
            </div>
            <!-- Small Coleslaw -->

            <!-- Bread -->
            <div class="category-item">
                  <img src="https://i.ibb.co/F42Z9jP3/IMG-5107.png" alt="Bread" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Bread</div>
                        <div class="item-description">Fresh bread</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">5.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Bread">+</button>
                        </div>
                  </div>
            </div>
            <!-- BBQ Sauce -->
            <div class="category-item">
                  <img src="https://i.ibb.co/qY1s7zFL/IMG-5109.png" alt="BBQ Sauce" class="item-image">
                  <div class="item-info">
                        <div class="item-name">BBQ Sauce</div>
                        <div class="item-description">BBQ dipping sauce</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">5.00 MAD</span></div>
                              <button class="item-add-btn" data-name="BBQ Sauce">+</button>
                        </div>
                  </div>
            </div>
            <!-- Spicy Sauce -->
            <div class="category-item">
                  <img src="https://i.ibb.co/vCfCDqF0/IMG-5108.png" alt="Spicy Sauce" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Spicy Sauce</div>
                        <div class="item-description">Spicy dipping sauce</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">5.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Spicy Sauce">+</button>
                        </div>
                  </div>
            </div>
            <!-- Medium Fries -->
            <div class="category-item">
                  <img src="https://i.ibb.co/0jPWcw0M/IMG-5111.png" alt="Medium Fries" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Medium Fries</div>
                        <div class="item-description">Medium french fries</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">19.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Medium Fries">+</button>
                        </div>
                  </div>
            </div>
            <!-- Family Fries -->
            <div class="category-item">
                  <img src="https://i.ibb.co/Y7v5PVdX/IMG-5658.webp" alt="Family Fries" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Family Fries</div>
                        <div class="item-description">Large family-size fries</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">38.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Family Fries">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- ===== NEW SECTION: DRINKS ===== -->
      <div class="category-items-section animate-section" id="drinksSection">
            <h2 class="section-title">DRINKS</h2>
            <!-- Small Pepsi -->
            <div class="category-item">
                  <img src="https://i.ibb.co/YFfGKBJw/IMG-5155.webp" alt="Small Pepsi" class="item-image">
                  <div class="item-info">
                        <div class="item-name"> Pepsi</div>
                        <div class="item-description">Small Pepsi cola</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">11.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Small Pepsi">+</button>
                        </div>
                  </div>
            </div>
            <!-- Small Miranda -->
            <div class="category-item">
                  <img src="https://i.ibb.co/Nndd5f05/IMG-5135.png" alt="Small Miranda" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Miranda</div>
                        <div class="item-description"> Miranda orange drink</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">11.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Small Miranda">+</button>
                        </div>
                  </div>
            </div>
            <!-- Small 7up -->
            <div class="category-item">
                  <img src="https://i.ibb.co/SXf5ZJ03/IMG-5136.png" alt="Small 7up" class="item-image">
                  <div class="item-info">
                        <div class="item-name">7up</div>
                        <div class="item-description">Small 7up lemon drink</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">11.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Small 7up">+</button>
                        </div>
                  </div>
            </div>
            <!-- Water -->
            <div class="category-item">
                  <img src="https://i.ibb.co/SX48S52t/IMG-5133.png" alt="Water" class="item-image">
                  <div class="item-info">
                        <div class="item-name">Water</div>
                        <div class="item-description">Mineral water</div>
                        <div class="item-footer">
                              <div class="item-price"><span class="price-amount">5.00 MAD</span></div>
                              <button class="item-add-btn" data-name="Water">+</button>
                        </div>
                  </div>
            </div>
      </div>

      <!-- View Cart Button -->
      <button class="view-cart-btn" id="viewCartBtn" style="display: none;">
            <span>View Basket</span>
            <div class="cart-item-count" id="cartItemCount">0</div>
      </button>

      <!-- Overlay & Modal Container (for search, share & customization) -->
      <div class="overlay" id="modalOverlay"></div>

      <!-- Search Modal -->
      <div class="overlay" id="searchOverlay" style="display: none;">
            <div class="search-modal">
                  <div class="search-header">
                        <div class="search-input-container">
                              <i class="fas fa-search"></i>
                              <input type="text" class="search-input" id="searchInput" placeholder="Search KFC meals...">
                        </div>
                        <div class="close-btn" id="closeSearchBtn">
                              <i class="fas fa-times"></i>
                        </div>
                  </div>
                  <div class="search-results" id="searchResults">
                        <div class="no-results">Type to start searching</div>
                  </div>
            </div>
      </div>

      <!-- Share Modal -->
      <div class="overlay" id="shareOverlay" style="display: none;">
            <div class="share-modal">
                  <div class="modal-header">
                        <div class="modal-title">Share Order</div>
                        <div class="close-btn" id="closeShareBtn">
                              <i class="fas fa-times"></i>
                        </div>
                  </div>
                  <div class="share-options">
                        <div class="share-option" id="whatsappShare">
                              <div class="share-icon">
                                    <i class="fab fa-whatsapp"></i>
                              </div>
                              <div class="share-text">Share via WhatsApp</div>
                        </div>
                        <div class="share-option" id="copyShare">
                              <div class="share-icon">
                                    <i class="fas fa-copy"></i>
                              </div>
                              <div class="share-text">Copy Order Details</div>
                        </div>
                  </div>
            </div>
      </div>

      <script>
            // ================== KFC Product Data (مع إضافة بيانات SIDES و DRINKS) ==================
            const productsData = {
                  // CHICKEN MEALS (with slider)
                  "Crispy Strips Meal (4 Pcs)": {
                        name: "Crispy Strips Meal (4 Pcs)",
                        basePrice: 78.00,
                        img: "https://i.ibb.co/TqPsCxRL/IMG-5127.png",
                        description: "4 crispy chicken strips served with Fries, Bread, 1 Drink and 1 Coleslaw.",
                        totalPieces: 4,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://i.ibb.co/YFfGKBJw/IMG-5155.webp"
                              },
                              {
                                    name: "7up",
                                    img: "https://i.ibb.co/SXf5ZJ03/IMG-5136.png"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://i.ibb.co/Nndd5f05/IMG-5135.png"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Crispy Strips Meal (6 Pcs)": {
                        name: "Crispy Strips Meal (6 Pcs)",
                        basePrice: 92.00,
                        img: "https://i.ibb.co/PzCXbbZ0/IMG-5126.png",
                        description: "6 crispy chicken strips served with Fries, Bread, 1 Drink and 1 Coleslaw.",
                        totalPieces: 6,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Super Dinner Meal (3 Pcs)": {
                        name: "Super Dinner Meal (3 Pcs)",
                        basePrice: 85.00,
                        img: "https://i.ibb.co/9m4Bj9nZ/IMG-5124.png",
                        description: "3 pieces of crispy chicken with bone served with Fries, Bread, 1 Drink and 1 Coleslaw.",
                        totalPieces: 3,
                        flavours: [{
                                    name: "Spicy chicken",
                                    img: "https://i.ibb.co/TqLZtxwv/IMG-5113.png"
                              },
                              {
                                    name: "Original chicken",
                                    img: "https://i.ibb.co/TqLZtxwv/IMG-5113.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Super Dinner Meal (4 Pcs)": {
                        name: "Super Dinner Meal (4 Pcs)",
                        basePrice: 95.00,
                        img: "https://i.ibb.co/1GPDnFVs/IMG-5125.png",
                        description: "4 pieces of crispy chicken with bone served with Fries, Bread, 1 Drink and 1 Coleslaw.",
                        totalPieces: 4,
                        flavours: [{
                                    name: "Spicy chicken",
                                    img: "https://i.ibb.co/TqLZtxwv/IMG-5113.png"
                              },
                              {
                                    name: "Original chicken",
                                    img: "https://i.ibb.co/TqLZtxwv/IMG-5113.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Hot Wings (3 Pcs)": {
                        name: "Hot Wings (3 Pcs)",
                        basePrice: 30.00,
                        img: "https://i.ibb.co/93nQWQPX/IMG-5148.jpg",
                        description: "3 spicy crispy hot wings, perfectly seasoned and fried.",
                        customizations: {
                              sizes: [],
                              base: [],
                              extras: []
                        }
                  },
                  "Loaded Bucket 8 Pcs": {
                        name: "Loaded Bucket 8 Pcs",
                        basePrice: 160.00,
                        img: "https://i.ibb.co/WdK8FWh/IMG-5633.jpg",
                        description: "8 chicken strips served with 1L Soft Drink, 3 Sauces and 1 Coleslaw.",
                        totalPieces: 8,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Loaded Bucket 12 Pcs": {
                        name: "Loaded Bucket 12 Pcs",
                        basePrice: 185.00,
                        img: "https://i.ibb.co/WdK8FWh/IMG-5633.jpg",
                        description: "12 chicken strips served with 1L Soft Drink, 3 Sauces and 1 Coleslaw.",
                        totalPieces: 12,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Loaded Bucket 16 Pcs": {
                        name: "Loaded Bucket 16 Pcs",
                        basePrice: 220.00,
                        img: "https://i.ibb.co/WdK8FWh/IMG-5633.jpg",
                        description: "16 chicken strips served with 1.5L Soft Drink, 6 Sauces and 1 Coleslaw.",
                        totalPieces: 16,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Loaded Bucket 20 Pcs": {
                        name: "Loaded Bucket 20 Pcs",
                        basePrice: 250.00,
                        img: "https://i.ibb.co/WdK8FWh/IMG-5633.jpg",
                        description: "20 chicken strips served with 1.5L Soft Drink, 6 Sauces and 1 Coleslaw.",
                        totalPieces: 20,
                        flavours: [{
                                    name: "Spicy strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              },
                              {
                                    name: "Original strips",
                                    img: "https://i.ibb.co/ymmg8ywn/IMG-5106.png"
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Hotshots": {
                        name: "Hotshots",
                        basePrice: 49.00,
                        img: "https://i.ibb.co/qMypV9mH/IMG-5105.png",
                        description: "Bite-sized crispy chicken pieces served with dipping sauce.",
                        customizations: {
                              sizes: [],
                              base: [],
                              extras: []
                        }
                  },
                  "Mighty Zinger Combo": {
                        name: "Mighty Zinger Combo",
                        basePrice: 86.00,
                        img: "https://i.ibb.co/nsTffWCY/IMG-5132.png",
                        description: "Double Zinger burger served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Zinger Combo": {
                        name: "Zinger Combo",
                        basePrice: 68.00,
                        img: "https://i.ibb.co/0yV81F32/IMG-5137.webp",
                        description: "Classic Zinger burger served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Twister Combo": {
                        name: "Twister Combo",
                        basePrice: 58.00,
                        img: "https://i.ibb.co/Pvb90S2d/IMG-5131.png",
                        description: "Twister chicken wrap served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "L’Kripsy Combo": {
                        name: "L’Kripsy Combo",
                        basePrice: 59.00,
                        img: "https://placehold.co/100x100/8B0000/white?text=LKripsy",
                        description: "L’Kripsy chicken sandwich served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Supreme Combo": {
                        name: "Supreme Combo",
                        basePrice: 83.00,
                        img: "https://i.ibb.co/Cpctsdz6/IMG-5129.png",
                        description: "Supreme chicken burger served with Fries, 1 Drink and",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Duo Dynamite Royal": {
                        name: "Duo Dynamite Royal",
                        basePrice: 98.00,
                        img: "https://i.ibb.co/ch2fcg6s/IMG-5643.png",
                        description: "Royal chicken burger and Cruncher Burger with Fries, 1 Drink .",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Mighty Royal Combo": {
                        name: "Mighty Royal Combo",
                        basePrice: 72.00,
                        img: "https://i.ibb.co/cSX784dG/IMG-5642.png",
                        description: "Double Royal chicken burger served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Cruncher Combo": {
                        name: "Cruncher Combo",
                        basePrice: 62.00,
                        img: "https://i.ibb.co/Cs2WDZTN/IMG-5644.jpg",
                        description: "Cruncher chicken burger served with Fries, 1 Drink",
                        customizations: {
                              flavour: {
                                    options: ['Spicy', 'Original'],
                                    default: 'Original'
                              },
                              extras: [{
                                          id: 'bone',
                                          name: 'Piece with bone',
                                          price: 21.00,
                                          img: 'https://i.ibb.co/TqLZtxwv/IMG-5113.png'
                                    },
                                    {
                                          id: 'strips',
                                          name: 'Chicken strips',
                                          price: 15.00,
                                          img: 'https://i.ibb.co/ymmg8ywn/IMG-5106.png'
                                    },
                                    {
                                          id: 'wings',
                                          name: '3pcs wings',
                                          price: 30.00,
                                          img: 'https://i.ibb.co/93nQWQPX/IMG-5148.jpg'
                                    }
                              ],
                              drinks: ['Pepsi', '7up', 'Miranda', 'Water']
                        }
                  },
                  "Family Bucket 8 Pcs": {
                        name: "Family Bucket 8 Pcs",
                        basePrice: 195.00,
                        img: "https://i.ibb.co/3mPYmS4H/IMG-5634.png",
                        description: "8 pieces of chicken with bone served with 1 Family Fries, 1L Soft Drink, 3 Sauces and 1 Large Coleslaw.",
                        totalPieces: 8,
                        flavours: [{
                                    name: "Spicy chicken",
                                    img: "https://glovo.dhmedia.io/image/menus-glovo/products/45561c9f239a5946c99a131aaf67960afc40ff0ae793320bf4beeacc124f948d?t=W3sicmVzaXplIjp7Im1vZGUiOiJmaXQiLCJ3aWR0aCI6MzIwLCJoZWlnaHQiOjMyMH19XQ=="
                              },
                              {
                                    name: "Original chicken",
                                    img: "https://glovo.dhmedia.io/image/menus-glovo/products/45561c9f239a5946c99a131aaf67960afc40ff0ae793320bf4beeacc124f948d?t=W3sicmVzaXplIjp7Im1vZGUiOiJmaXQiLCJ3aWR0aCI6MzIwLCJoZWlnaHQiOjMyMH19XQ=="
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  "Family Bucket 12 Pcs": {
                        name: "Family Bucket 12 Pcs",
                        basePrice: 225.00,
                        img: "https://i.ibb.co/3mPYmS4H/IMG-5634.png",
                        description: "12 pieces of chicken with bone served with 1 Family Fries, 1L Soft Drink, 3 Sauces and 1 Large Coleslaw.",
                        totalPieces: 12,
                        flavours: [{
                                    name: "Spicy chicken",
                                    img: "https://glovo.dhmedia.io/image/menus-glovo/products/45561c9f239a5946c99a131aaf67960afc40ff0ae793320bf4beeacc124f948d?t=W3sicmVzaXplIjp7Im1vZGUiOiJmaXQiLCJ3aWR0aCI6MzIwLCJoZWlnaHQiOjMyMH19XQ=="
                              },
                              {
                                    name: "Original chicken",
                                    img: "https://glovo.dhmedia.io/image/menus-glovo/products/45561c9f239a5946c99a131aaf67960afc40ff0ae793320bf4beeacc124f948d?t=W3sicmVzaXplIjp7Im1vZGUiOiJmaXQiLCJ3aWR0aCI6MzIwLCJoZWlnaHQiOjMyMH19XQ=="
                              }
                        ],
                        drinks: [{
                                    name: "Pepsi",
                                    img: "https://www.pngkey.com/png/full/175-1759121_pepsi-pepsi-1-litre-png.png"
                              },
                              {
                                    name: "7up",
                                    img: "https://www.bbassets.com/media/uploads/p/l/34654_3-7-up-lemon-flavour-coldrink.jpg"
                              },
                              {
                                    name: "Miranda",
                                    img: "https://img.ananinja.com/media/ninja-catalog-42/item_pics/012000802850/012000802850_1.png?w=640"
                              },
                              {
                                    name: "Water",
                                    img: "https://i.ibb.co/SX48S52t/IMG-5133.png"
                              }
                        ]
                  },
                  // ===== بيانات العناصر الجديدة (SIDES) =====
                  "Rizo spicy": {
                        name: "Rizo spicy",
                        basePrice: 55.00,
                        img: "https://i.ibb.co/gQrsPjN/IMG-5114.jpg",
                        description: "Spicy Rizo side"
                        // لا توجد totalPieces ولا customizations → إضافة مباشرة
                  },
                  "Rizo original": {
                        name: "Rizo original",
                        basePrice: 55.00,
                        img: "https://i.ibb.co/gQrsPjN/IMG-5114.jpg",
                        description: "Original Rizo side"
                  },
                  "Big Coleslaw": {
                        name: "Big Coleslaw",
                        basePrice: 22.00,
                        img: "https://i.ibb.co/8DrW8jmZ/IMG-5112.png",
                        description: "Large coleslaw"
                  },
                  "Small Coleslaw": {
                        name: "Small Coleslaw",
                        basePrice: 14.00,
                        img: "https://i.ibb.co/8DrW8jmZ/IMG-5112.png",
                        description: "Small coleslaw"
                  },
                  "Bread": {
                        name: "Bread",
                        basePrice: 5.00,
                        img: "https://i.ibb.co/F42Z9jP3/IMG-5107.png",
                        description: "Fresh bread"
                  },
                  "BBQ Sauce": {
                        name: "BBQ Sauce",
                        basePrice: 5.00,
                        img: "https://i.ibb.co/rGHyvLHv/IMG-5110.png",
                        description: "BBQ dipping sauce"
                  },
                  "Spicy Sauce": {
                        name: "Spicy Sauce",
                        basePrice: 5.00,
                        img: "https://i.ibb.co/vCfCDqF0/IMG-5108.png",
                        description: "Spicy dipping sauce"
                  },
                  "Medium Fries": {
                        name: "Medium Fries",
                        basePrice: 19.00,
                        img: "https://i.ibb.co/0jPWcw0M/IMG-5111.png",
                        description: "Medium french fries"
                  },
                  "Family Fries": {
                        name: "Family Fries",
                        basePrice: 38.00,
                        img: "https://i.ibb.co/Y7v5PVdX/IMG-5658.webp",
                        description: "Large family-size fries"
                  },
                  // ===== بيانات العناصر الجديدة (DRINKS) =====
                  "Small Pepsi": {
                        name: "Small Pepsi",
                        basePrice: 11.00,
                        img: "https://i.ibb.co/YFfGKBJw/IMG-5155.webp",
                        description: "Small Pepsi cola"
                  },
                  "Small Miranda": {
                        name: "Small Miranda",
                        basePrice: 11.00,
                        img: "https://i.ibb.co/Nndd5f05/IMG-5135.png",
                        description: "Small Miranda orange drink"
                  },
                  "Small 7up": {
                        name: "Small 7up",
                        basePrice: 11.00,
                        img: "https://i.ibb.co/SXf5ZJ03/IMG-5136.png",
                        description: "Small 7up lemon drink"
                  },
                  "Water": {
                        name: "Water",
                        basePrice: 5.00,
                        img: "https://i.ibb.co/SX48S52t/IMG-5133.png",
                        description: "Mineral water"
                  }
            };
            // ========== باقي الكود (المنطق) مع دمج المودالات ==========
            let cart = JSON.parse(localStorage.getItem('kfcCart')) || [];
            // عناصر DOM
            const navbar = document.getElementById('navbar');
            const backButton = document.getElementById('backButton');
            const searchButton = document.getElementById('searchButton');
            const shareButton = document.getElementById('shareButton');
            const viewCartBtn = document.getElementById('viewCartBtn');
            const cartItemCount = document.getElementById('cartItemCount');
            const modalOverlay = document.getElementById('modalOverlay');
            const searchOverlay = document.getElementById('searchOverlay');
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            const closeSearchBtn = document.getElementById('closeSearchBtn');
            const shareOverlay = document.getElementById('shareOverlay');
            const closeShareBtn = document.getElementById('closeShareBtn');
            const whatsappShare = document.getElementById('whatsappShare');
            const copyShare = document.getElementById('copyShare');
            // دوال مساعدة
            function saveCart() {
                  localStorage.setItem('kfcCart', JSON.stringify(cart));
            }

            function updateCart() {
                  const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
                  if (itemCount > 0) {
                        viewCartBtn.style.display = 'flex';
                        cartItemCount.textContent = itemCount;
                  } else {
                        viewCartBtn.style.display = 'none';
                  }
            }

            function initCart() {
                  updateCart();
            }
            // ================== أنيميشن الإضافة ==================
            let lastClickedAddRect = null;

            function flyToBasket(startRect) {
                  if (!viewCartBtn) return;
                  const basketRect = viewCartBtn.getBoundingClientRect();
                  const startX = startRect.left + startRect.width / 2;
                  const startY = startRect.top + startRect.height / 2;
                  const endX = basketRect.left + basketRect.width / 2;
                  const endY = basketRect.top + basketRect.height / 2;
                  const flyingEl = document.createElement('div');
                  flyingEl.className = 'flying-element';
                  flyingEl.style.left = startX + 'px';
                  flyingEl.style.top = startY + 'px';
                  flyingEl.style.transform = 'translate(-50%, -50%)';
                  document.body.appendChild(flyingEl);
                  flyingEl.offsetHeight;
                  flyingEl.style.transform = `translate(${endX - startX}px, ${endY - startY}px) scale(0.5)`;
                  flyingEl.addEventListener('transitionend', function() {
                        flyingEl.remove();
                        createStarsAnimation();
                  }, {
                        once: true
                  });
            }

            function createStarsAnimation() {
                  if (!viewCartBtn) return;
                  for (let i = 0; i < 12; i++) {
                        const star = document.createElement('div');
                        star.classList.add('star');
                        star.innerHTML = '★';
                        star.style.position = 'fixed';
                        star.style.zIndex = '9999';
                        star.style.color = 'white';
                        star.style.fontSize = Math.floor(12 + Math.random() * 8) + 'px';
                        star.style.opacity = '0';
                        const rect = viewCartBtn.getBoundingClientRect();
                        const startX = rect.left + rect.width / 2;
                        const startY = rect.top + rect.height / 2;
                        star.style.left = startX + 'px';
                        star.style.top = startY + 'px';
                        const angle = Math.random() * Math.PI * 2;
                        const distance = 40 + Math.random() * 60;
                        const endX = startX + Math.cos(angle) * distance;
                        const endY = startY + Math.sin(angle) * distance;
                        document.body.appendChild(star);
                        star.animate([{
                                    transform: 'translate(0,0) scale(1)',
                                    opacity: 1
                              },
                              {
                                    transform: `translate(${endX-startX}px, ${endY-startY}px) scale(0)`,
                                    opacity: 0
                              }
                        ], {
                              duration: 800 + Math.random() * 400,
                              easing: 'cubic-bezier(0.175,0.885,0.32,1.275)'
                        }).onfinish = () => {
                              star.remove();
                        };
                  }
            }

            function addItemToCart(item) {
                  const existingIndex = cart.findIndex(cartItem =>
                        cartItem.name === item.name &&
                        JSON.stringify(cartItem.customizations) === JSON.stringify(item.customizations) &&
                        cartItem.specialInstructions === item.specialInstructions
                  );
                  if (existingIndex !== -1) {
                        cart[existingIndex].quantity += item.quantity;
                        cart[existingIndex].totalPrice += item.totalPrice;
                  } else {
                        cart.push(item);
                  }
                  saveCart();
                  updateCart();
                  if (lastClickedAddRect) {
                        flyToBasket(lastClickedAddRect);
                        lastClickedAddRect = null;
                  } else {
                        createStarsAnimation();
                  }
            }
            // دالة بناء مودال السلايدر (للمنتجات ذات القطع)
            function buildSliderModal(productData) {
                  const modal = document.createElement('div');
                  modal.className = 'modal';
                  const totalPieces = productData.totalPieces;
                  const leftFlavour = productData.flavours[0];
                  const rightFlavour = productData.flavours[1];
                  let leftQty = Math.floor(totalPieces / 2);
                  let rightQty = totalPieces - leftQty;
                  let mainQuantity = 1;
                  let selectedDrink = productData.drinks[0].name;
                  // Header
                  const header = document.createElement('div');
                  header.className = 'modal-header';
                  header.innerHTML = `
        <div class="modal-title">Customize ${productData.name}</div>
        <div class="close-btn" id="closeModalBtn"><i class="fas fa-times"></i></div>
      `;
                  // Content
                  const content = document.createElement('div');
                  content.className = 'modal-content';
                  // Main image
                  const mainImg = document.createElement('img');
                  mainImg.className = 'modal-image';
                  mainImg.src = productData.img;
                  mainImg.alt = productData.name;
                  const title = document.createElement('h2');
                  title.className = 'modal-item-title';
                  title.textContent = productData.name;
                  const desc = document.createElement('p');
                  desc.className = 'modal-desc';
                  desc.textContent = productData.description;
                  content.appendChild(mainImg);
                  content.appendChild(title);
                  content.appendChild(desc);
                  // Flavour slider section
                  const flavourSection = document.createElement('div');
                  flavourSection.className = 'section-title-modal';
                  flavourSection.innerHTML = '<i class="fas fa-sliders-h"></i> Balance your flavours';
                  content.appendChild(flavourSection);
                  const flavourBalance = document.createElement('div');
                  flavourBalance.className = 'flavour-balance';
                  const labelsDiv = document.createElement('div');
                  labelsDiv.className = 'flavour-labels';
                  labelsDiv.innerHTML = `
        <div class="flavour-side">
          <img src="${leftFlavour.img}" alt="${leftFlavour.name}">
          <span>${leftFlavour.name}</span>
          <div class="quantity" id="leftQtyDisplay">${leftQty}</div>
          <span class="pieces-label spicy">pieces spicy</span>
        </div>
        <div class="vs-divider">VS</div>
        <div class="flavour-side">
          <img src="${rightFlavour.img}" alt="${rightFlavour.name}">
          <span>${rightFlavour.name}</span>
          <div class="quantity" id="rightQtyDisplay">${rightQty}</div>
          <span class="pieces-label original">pieces original</span>
        </div>
      `;
                  flavourBalance.appendChild(labelsDiv);
                  const sliderContainer = document.createElement('div');
                  sliderContainer.className = 'slider-container';
                  const sliderTrack = document.createElement('div');
                  sliderTrack.className = 'slider-track';
                  sliderTrack.id = 'sliderTrack';
                  const slider = document.createElement('input');
                  slider.type = 'range';
                  slider.min = '0';
                  slider.max = totalPieces.toString();
                  slider.value = leftQty.toString();
                  slider.className = 'flavour-slider';
                  slider.id = 'flavourSlider';
                  sliderContainer.appendChild(sliderTrack);
                  sliderContainer.appendChild(slider);
                  flavourBalance.appendChild(sliderContainer);
                  content.appendChild(flavourBalance);
                  // Drinks section
                  const drinkSectionTitle = document.createElement('div');
                  drinkSectionTitle.className = 'section-title-modal';
                  drinkSectionTitle.innerHTML = '<i class="fas fa-glass-whiskey"></i> Choose drink';
                  content.appendChild(drinkSectionTitle);
                  const drinksRow = document.createElement('div');
                  drinksRow.className = 'drinks-row';
                  drinksRow.id = 'drinksRow';
                  productData.drinks.forEach((drink, index) => {
                        const drinkDiv = document.createElement('div');
                        drinkDiv.className = `drink-option ${index === 0 ? 'selected' : ''}`;
                        drinkDiv.setAttribute('data-drink', drink.name);
                        drinkDiv.innerHTML = `
          <img src="${drink.img}" alt="${drink.name}" class="drink-image">
          <div class="drink-name">${drink.name}</div>
        `;
                        drinksRow.appendChild(drinkDiv);
                  });
                  content.appendChild(drinksRow);
                  // Special instructions
                  const instrTitle = document.createElement('div');
                  instrTitle.className = 'section-title-modal';
                  instrTitle.innerHTML = '<i class="fas fa-pen"></i> Special instructions';
                  content.appendChild(instrTitle);
                  const specialTextarea = document.createElement('textarea');
                  specialTextarea.id = 'specialInstructions';
                  specialTextarea.className = 'special-instructions';
                  specialTextarea.placeholder = 'Add any special instructions...';
                  specialTextarea.rows = 3;
                  specialTextarea.maxLength = 200;
                  content.appendChild(specialTextarea);
                  const charCounter = document.createElement('div');
                  charCounter.className = 'char-counter';
                  charCounter.innerHTML = '<span id="charCount">0</span>/200 characters';
                  content.appendChild(charCounter);
                  // Footer
                  const footer = document.createElement('div');
                  footer.className = 'fixed-footer';
                  const counterDiv = document.createElement('div');
                  counterDiv.className = 'counter';
                  counterDiv.innerHTML = `
        <button class="counter-btn" id="decrementBtn"><i class="fas fa-minus"></i></button>
        <span class="counter-value" id="counterValue">${mainQuantity}</span>
        <button class="counter-btn" id="incrementBtn"><i class="fas fa-plus"></i></button>
      `;
                  const addBtn = document.createElement('button');
                  addBtn.className = 'modal-add-btn';
                  addBtn.id = 'modalAddBtn';
                  addBtn.innerHTML = `<i class="fas fa-shopping-bag"></i> Add · <span class="price" id="totalPrice">${(productData.basePrice * mainQuantity).toFixed(2)} MAD</span>`;
                  footer.appendChild(counterDiv);
                  footer.appendChild(addBtn);
                  modal.appendChild(header);
                  modal.appendChild(content);
                  modal.appendChild(footer);
                  // ربط الأحداث
                  const closeBtn = modal.querySelector('#closeModalBtn');
                  closeBtn.addEventListener('click', closeModal);
                  const sliderEl = modal.querySelector('#flavourSlider');
                  const leftQtyDisplay = modal.querySelector('#leftQtyDisplay');
                  const rightQtyDisplay = modal.querySelector('#rightQtyDisplay');
                  const sliderTrackEl = modal.querySelector('#sliderTrack');

                  function updateSliderTrack(value) {
                        const percent = (value / totalPieces) * 100;
                        sliderTrackEl.style.background = `linear-gradient(90deg, #e03131 0%, #e03131 ${percent}%, #fbbf24 ${percent}%, #fbbf24 100%)`;
                  }

                  function updateFromSlider(val) {
                        const newLeft = parseInt(val, 10);
                        const newRight = totalPieces - newLeft;
                        leftQty = newLeft;
                        rightQty = newRight;
                        leftQtyDisplay.textContent = leftQty;
                        rightQtyDisplay.textContent = rightQty;
                        updateSliderTrack(newLeft);
                  }
                  updateSliderTrack(leftQty);
                  sliderEl.addEventListener('input', (e) => updateFromSlider(e.target.value));
                  // اختيار المشروب
                  const drinkOptions = modal.querySelectorAll('.drink-option');
                  drinkOptions.forEach(opt => {
                        opt.addEventListener('click', function() {
                              drinkOptions.forEach(o => o.classList.remove('selected'));
                              this.classList.add('selected');
                              selectedDrink = this.getAttribute('data-drink');
                        });
                  });
                  // عداد الأحرف
                  const specialInput = modal.querySelector('#specialInstructions');
                  const charSpan = modal.querySelector('#charCount');
                  specialInput.addEventListener('input', function() {
                        charSpan.textContent = this.value.length;
                  });
                  // عداد الكمية الرئيسي
                  const decrementBtn = modal.querySelector('#decrementBtn');
                  const incrementBtn = modal.querySelector('#incrementBtn');
                  const counterValue = modal.querySelector('#counterValue');
                  const totalPriceSpan = modal.querySelector('#totalPrice');
                  decrementBtn.addEventListener('click', () => {
                        if (mainQuantity > 1) {
                              mainQuantity--;
                              counterValue.textContent = mainQuantity;
                              totalPriceSpan.textContent = (productData.basePrice * mainQuantity).toFixed(2) + ' MAD';
                        }
                  });
                  incrementBtn.addEventListener('click', () => {
                        mainQuantity++;
                        counterValue.textContent = mainQuantity;
                        totalPriceSpan.textContent = (productData.basePrice * mainQuantity).toFixed(2) + ' MAD';
                  });
                  // زر الإضافة
                  const addButton = modal.querySelector('#modalAddBtn');
                  addButton.addEventListener('click', () => {
                        const cartItem = {
                              name: productData.name,
                              basePrice: productData.basePrice,
                              quantity: mainQuantity,
                              customizations: {
                                    leftFlavour: leftFlavour.name,      // تم التعديل هنا: استخدام اسم النكهة الفعلي
                                    rightFlavour: rightFlavour.name,    // تم التعديل هنا: استخدام اسم النكهة الفعلي
                                    leftQty: leftQty,
                                    rightQty: rightQty,
                                    drink: selectedDrink
                              },
                              totalPrice: productData.basePrice * mainQuantity,
                              img: productData.img,
                              description: productData.description,
                              specialInstructions: specialInput.value.trim()
                        };
                        addItemToCart(cartItem);
                        closeModal();
                  });
                  return modal;
            }
            // دالة بناء مودال Combo Meals (مع الإضافات)
            function buildComboModal(productData) {
                  const modal = document.createElement('div');
                  modal.className = 'modal';
                  // بيانات المنتج
                  let selectedFlavour = productData.customizations.flavour.default;
                  let selectedDrink = productData.customizations.drinks[0];
                  let quantities = {};
                  let subtotalSpans = {};
                  let globalQty = 1;
                  // إعداد الكميات للإضافات
                  if (productData.customizations.extras) {
                        productData.customizations.extras.forEach(item => {
                              quantities[item.id] = 0;
                        });
                  }
                  // Header
                  const header = document.createElement('div');
                  header.className = 'modal-header';
                  header.innerHTML = `
        <div class="modal-title">Customize ${productData.name}</div>
        <div class="close-btn" id="closeModalBtn"><i class="fas fa-times"></i></div>
      `;
                  // Content
                  const content = document.createElement('div');
                  content.className = 'modal-content';
                  // Main image
                  const mainImg = document.createElement('img');
                  mainImg.className = 'modal-image';
                  mainImg.src = productData.img;
                  mainImg.alt = productData.name;
                  const title = document.createElement('h2');
                  title.className = 'modal-item-title';
                  title.textContent = productData.name;
                  const desc = document.createElement('p');
                  desc.className = 'modal-desc';
                  desc.textContent = productData.description;
                  content.appendChild(mainImg);
                  content.appendChild(title);
                  content.appendChild(desc);
                  // Flavour selector
                  if (productData.customizations.flavour) {
                        const flavourDiv = document.createElement('div');
                        flavourDiv.className = 'flavour-row';
                        const options = productData.customizations.flavour.options;
                        options.forEach((opt, index) => {
                              const optSpan = document.createElement('span');
                              optSpan.className = `flavour-option ${opt === selectedFlavour ? 'active' : ''}`;
                              optSpan.textContent = opt;
                              optSpan.dataset.flavour = opt;
                              optSpan.addEventListener('click', () => {
                                    flavourDiv.querySelectorAll('.flavour-option').forEach(el => el.classList.remove('active'));
                                    optSpan.classList.add('active');
                                    selectedFlavour = opt;
                              });
                              flavourDiv.appendChild(optSpan);
                              if (index < options.length - 1) {
                                    const orSpan = document.createElement('span');
                                    orSpan.className = 'flavour-or';
                                    orSpan.textContent = 'or';
                                    flavourDiv.appendChild(orSpan);
                              }
                        });
                        content.appendChild(flavourDiv);
                  }
                  // Extras section
                  if (productData.customizations.extras && productData.customizations.extras.length > 0) {
                        const extraHeading = document.createElement('div');
                        extraHeading.className = 'extra-heading';
                        extraHeading.innerHTML = '<i class="fas fa-plus-circle"></i> Add Extra + <span class="optional-text">(optional)</span>';
                        content.appendChild(extraHeading);
                        const chickenRow = document.createElement('div');
                        chickenRow.className = 'chicken-row';
                        productData.customizations.extras.forEach(item => {
                              const card = document.createElement('div');
                              card.className = 'chicken-card';
                              const img = document.createElement('img');
                              img.className = 'chicken-img';
                              img.src = item.img;
                              img.alt = item.name;
                              const name = document.createElement('div');
                              name.className = 'chicken-name';
                              name.textContent = item.name;
                              const subtotalSpan = document.createElement('div');
                              subtotalSpan.className = 'chicken-subtotal';
                              subtotalSpan.id = `subtotal-${item.id}`;
                              subtotalSpan.textContent = '0.00 MAD';
                              subtotalSpans[item.id] = subtotalSpan;
                              const unitHint = document.createElement('div');
                              unitHint.className = 'unit-hint';
                              unitHint.textContent = `@ ${item.price.toFixed(2)} MAD`;
                              const counterDiv = document.createElement('div');
                              counterDiv.className = 'item-counter';
                              const minusBtn = document.createElement('button');
                              minusBtn.className = 'counter-btn';
                              minusBtn.innerHTML = '<i class="fas fa-minus"></i>';
                              minusBtn.addEventListener('click', (e) => {
                                    e.stopPropagation();
                                    if (quantities[item.id] > 0) {
                                          quantities[item.id]--;
                                          updateItemDisplay(item.id);
                                    }
                              });
                              const qtySpan = document.createElement('span');
                              qtySpan.className = 'item-qty';
                              qtySpan.id = `qty-${item.id}`;
                              qtySpan.textContent = '0';
                              const plusBtn = document.createElement('button');
                              plusBtn.className = 'counter-btn';
                              plusBtn.innerHTML = '<i class="fas fa-plus"></i>';
                              plusBtn.addEventListener('click', (e) => {
                                    e.stopPropagation();
                                    quantities[item.id]++;
                                    updateItemDisplay(item.id);
                              });
                              counterDiv.appendChild(minusBtn);
                              counterDiv.appendChild(qtySpan);
                              counterDiv.appendChild(plusBtn);
                              card.appendChild(img);
                              card.appendChild(name);
                              card.appendChild(subtotalSpan);
                              card.appendChild(unitHint);
                              card.appendChild(counterDiv);
                              chickenRow.appendChild(card);
                        });
                        content.appendChild(chickenRow);
                  }
                  // Drink selection
                  if (productData.customizations.drinks) {
                        const drinkSection = document.createElement('div');
                        drinkSection.className = 'drink-group';
                        drinkSection.innerHTML = `<div style="font-weight:600; margin-bottom:4px;"><i class="fas fa-glass-cheers"></i> Choose your drink</div>`;
                        const drinkOptionsDiv = document.createElement('div');
                        drinkOptionsDiv.className = 'drink-options';
                        productData.customizations.drinks.forEach(drink => {
                              const label = document.createElement('label');
                              label.className = 'drink-option';
                              if (drink === selectedDrink) label.classList.add('selected');
                              const radio = document.createElement('input');
                              radio.type = 'radio';
                              radio.name = 'drink';
                              radio.value = drink;
                              if (drink === selectedDrink) radio.checked = true;
                              radio.addEventListener('change', () => {
                                    drinkOptionsDiv.querySelectorAll('.drink-option').forEach(opt => opt.classList.remove('selected'));
                                    label.classList.add('selected');
                                    selectedDrink = drink;
                                    updateTotalAndButton();
                              });
                              const nameSpan = document.createElement('span');
                              nameSpan.className = 'drink-name';
                              nameSpan.textContent = drink;
                              label.appendChild(radio);
                              label.appendChild(nameSpan);
                              drinkOptionsDiv.appendChild(label);
                        });
                        drinkSection.appendChild(drinkOptionsDiv);
                        content.appendChild(drinkSection);
                  }
                  // Special instructions
                  const instrSection = document.createElement('div');
                  instrSection.innerHTML = `
        <div style="font-weight:600; margin-bottom:6px;"><i class="fas fa-comment-alt"></i> Special instructions (optional)</div>
        <textarea id="kfcSpecial" class="special-instructions" placeholder="No Lettuce? No ice? ..." rows="2" maxlength="200"></textarea>
        <div class="char-counter"><span id="charCount">0</span>/200 characters</div>
      `;
                  content.appendChild(instrSection);
                  // Footer
                  const footer = document.createElement('div');
                  footer.className = 'fixed-footer';
                  const globalCounterDiv = document.createElement('div');
                  globalCounterDiv.className = 'global-counter';
                  const globalMinus = document.createElement('button');
                  globalMinus.className = 'counter-btn';
                  globalMinus.innerHTML = '<i class="fas fa-minus"></i>';
                  globalMinus.addEventListener('click', () => {
                        if (globalQty > 1) {
                              globalQty--;
                              updateGlobalQty();
                        }
                  });
                  const globalQtySpan = document.createElement('span');
                  globalQtySpan.className = 'global-qty';
                  globalQtySpan.id = 'globalQty';
                  globalQtySpan.textContent = globalQty;
                  const globalPlus = document.createElement('button');
                  globalPlus.className = 'counter-btn';
                  globalPlus.innerHTML = '<i class="fas fa-plus"></i>';
                  globalPlus.addEventListener('click', () => {
                        globalQty++;
                        updateGlobalQty();
                  });
                  globalCounterDiv.appendChild(globalMinus);
                  globalCounterDiv.appendChild(globalQtySpan);
                  globalCounterDiv.appendChild(globalPlus);
                  const addBtn = document.createElement('button');
                  addBtn.className = 'modal-add-btn';
                  addBtn.id = 'modalAddBtn';
                  addBtn.innerHTML = `Add · <span id="totalPriceValue">${productData.basePrice.toFixed(2)}</span> MAD`;
                  footer.appendChild(globalCounterDiv);
                  footer.appendChild(addBtn);
                  modal.appendChild(header);
                  modal.appendChild(content);
                  modal.appendChild(footer);
                  // دوال مساعدة داخل المودال
                  function updateItemDisplay(id) {
                        const qtySpan = modal.querySelector(`#qty-${id}`);
                        if (qtySpan) qtySpan.textContent = quantities[id];
                        const item = productData.customizations.extras.find(i => i.id === id);
                        const subtotal = quantities[id] * item.price;
                        const subtotalSpan = modal.querySelector(`#subtotal-${id}`);
                        if (subtotalSpan) subtotalSpan.textContent = subtotal.toFixed(2) + ' MAD';
                        updateTotalAndButton();
                  }

                  function updateGlobalQty() {
                        modal.querySelector('#globalQty').textContent = globalQty;
                        updateTotalAndButton();
                  }

                  function calculateTotal() {
                        let extrasTotal = 0;
                        if (productData.customizations.extras) {
                              productData.customizations.extras.forEach(item => {
                                    extrasTotal += quantities[item.id] * item.price;
                              });
                        }
                        return (productData.basePrice * globalQty) + extrasTotal;
                  }

                  function updateTotalAndButton() {
                        const total = calculateTotal();
                        const priceSpan = modal.querySelector('#totalPriceValue');
                        if (priceSpan) priceSpan.textContent = total.toFixed(2);
                        addBtn.disabled = (globalQty < 1);
                  }
                  // عداد الأحرف
                  const specialInput = modal.querySelector('#kfcSpecial');
                  const charSpan = modal.querySelector('#charCount');
                  if (specialInput) {
                        specialInput.addEventListener('input', function() {
                              charSpan.textContent = this.value.length;
                        });
                  }
                  // زر الإغلاق
                  const closeBtn = modal.querySelector('#closeModalBtn');
                  closeBtn.addEventListener('click', closeModal);
                  // زر الإضافة
                  addBtn.addEventListener('click', function() {
                        // بناء كائن التخصيصات
                        const customizations = {
                              flavour: selectedFlavour,
                              drink: selectedDrink,
                              extras: {}
                        };
                        if (productData.customizations.extras) {
                              productData.customizations.extras.forEach(item => {
                                    if (quantities[item.id] > 0) {
                                          customizations.extras[item.id] = {
                                                name: item.name,
                                                quantity: quantities[item.id],
                                                price: item.price
                                          };
                                    }
                              });
                        }
                        const totalPrice = calculateTotal();
                        const cartItem = {
                              name: productData.name,
                              basePrice: productData.basePrice,
                              quantity: globalQty,
                              customizations: customizations,
                              totalPrice: totalPrice,
                              img: productData.img,
                              description: productData.description,
                              specialInstructions: specialInput ? specialInput.value.trim() : ""
                        };
                        addItemToCart(cartItem);
                        closeModal();
                  });
                  // تحديث أولي
                  updateTotalAndButton();
                  return modal;
            }

            function closeModal() {
                  modalOverlay.style.display = 'none';
                  document.body.style.overflow = 'auto';
                  modalOverlay.innerHTML = '';
            }

            function openModal(productName) {
                  let productData = productsData[productName];
                  if (!productData) {
                        // Fallback: try to find product in DOM
                        const button = document.querySelector(`[data-name="${productName}"]`);
                        if (button) {
                              const img = button.closest('.category-item')?.querySelector('.item-image')?.src || '';
                              const priceText = button.closest('.category-item')?.querySelector('.price-amount')?.textContent || '0';
                              const price = parseFloat(priceText.replace(' MAD', '')) || 0;
                              const description = button.closest('.category-item')?.querySelector('.item-description')?.textContent || '';
                              productData = {
                                    name: productName,
                                    basePrice: price,
                                    img: img,
                                    description: description,
                                    customizations: {
                                          sizes: [],
                                          base: [],
                                          extras: []
                                    }
                              };
                        } else {
                              alert('Product not found');
                              return;
                        }
                  }
                  // التحقق من نوع التخصيصات: إذا كان هناك totalPieces أو customizations معقدة نفتح مودال، وإلا نضيف مباشرة
                  if (productData.totalPieces) {
                        // مودال السلايدر (Chicken Meals, Loaded Buckets, Family Buckets)
                        document.body.style.overflow = 'hidden';
                        const modal = buildSliderModal(productData);
                        modalOverlay.innerHTML = '';
                        modalOverlay.appendChild(modal);
                        modalOverlay.style.display = 'flex';
                        modalOverlay.addEventListener('click', function(e) {
                              if (e.target === modalOverlay) {
                                    closeModal();
                              }
                        });
                  } else if (productData.customizations && (
                              (productData.customizations.extras && productData.customizations.extras.length > 0) ||
                              productData.customizations.flavour ||
                              productData.customizations.drinks
                        )) {
                        // مودال Combo Meals (مع الإضافات)
                        document.body.style.overflow = 'hidden';
                        const modal = buildComboModal(productData);
                        modalOverlay.innerHTML = '';
                        modalOverlay.appendChild(modal);
                        modalOverlay.style.display = 'flex';
                        modalOverlay.addEventListener('click', function(e) {
                              if (e.target === modalOverlay) {
                                    closeModal();
                              }
                        });
                  } else {
                        // لا تخصيصات → إضافة مباشرة (هذا ينطبق على SIDES و DRINKS ومعظم المنتجات البسيطة)
                        addItemToCart({
                              name: productData.name,
                              basePrice: productData.basePrice,
                              quantity: 1,
                              customizations: {},
                              totalPrice: productData.basePrice,
                              img: productData.img,
                              description: productData.description,
                              specialInstructions: ""
                        });
                  }
            }
            // ========== دوال البحث والمشاركة (كما هي) ==========
            searchButton.addEventListener('click', () => {
                  searchOverlay.style.display = 'flex';
                  document.body.style.overflow = 'hidden';
                  searchInput.focus();
            });
            closeSearchBtn.addEventListener('click', () => {
                  searchOverlay.style.display = 'none';
                  document.body.style.overflow = 'auto';
            });
            searchInput.addEventListener('input', function() {
                  performSearch(this.value);
            });
            searchOverlay.addEventListener('click', function(e) {
                  if (e.target === searchOverlay) {
                        searchOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                  }
            });

            function performSearch(query) {
                  if (query.length < 2) {
                        searchResults.innerHTML = '<div class="no-results">Type at least 2 characters to search</div>';
                        return;
                  }
                  const allItems = document.querySelectorAll('.category-item');
                  const results = [];
                  allItems.forEach(item => {
                        const nameElement = item.querySelector('.item-name');
                        if (nameElement && nameElement.textContent.toLowerCase().includes(query.toLowerCase())) {
                              results.push(item.cloneNode(true));
                        }
                  });
                  if (results.length > 0) {
                        searchResults.innerHTML = '';
                        results.forEach(result => {
                              result.style.cursor = 'pointer';
                              result.addEventListener('click', function() {
                                    const addButton = this.querySelector('.item-add-btn');
                                    if (addButton) {
                                          const name = addButton.getAttribute('data-name');
                                          openModal(name);
                                          searchOverlay.style.display = 'none';
                                          document.body.style.overflow = 'auto';
                                    }
                              });
                              searchResults.appendChild(result);
                        });
                  } else {
                        searchResults.innerHTML = '<div class="no-results">No results found for "' + query + '"</div>';
                  }
            }
            shareButton.addEventListener('click', () => {
                  shareOverlay.style.display = 'flex';
                  document.body.style.overflow = 'hidden';
            });
            closeShareBtn.addEventListener('click', () => {
                  shareOverlay.style.display = 'none';
                  document.body.style.overflow = 'auto';
            });
            shareOverlay.addEventListener('click', (e) => {
                  if (e.target === shareOverlay) {
                        shareOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                  }
            });
            whatsappShare.addEventListener('click', shareViaWhatsApp);
            copyShare.addEventListener('click', copyOrderDetails);

            function shareViaWhatsApp() {
                  if (cart.length === 0) {
                        alert('Your cart is empty! Add items to share your order.');
                        shareOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        return;
                  }
                  let message = " 🍗 *KFC Order Details* \n\n====================\n\n";
                  let totalAmount = 0;
                  cart.forEach((item, index) => {
                        message += `*${index+1}. ${item.name}*\nQuantity: ${item.quantity}\nPrice: ${item.totalPrice.toFixed(2)} MAD\n--------------------\n`;
                        totalAmount += item.totalPrice;
                  });
                  message += `\n*Total Amount:* ${totalAmount.toFixed(2)} MAD\n\n====================\nThank you for ordering from KFC!`;
                  window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
                  shareOverlay.style.display = 'none';
                  document.body.style.overflow = 'auto';
            }

            function copyOrderDetails() {
                  if (cart.length === 0) {
                        alert('Your cart is empty! Add items to copy order details.');
                        shareOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        return;
                  }
                  let orderDetails = "KFC Order Details\n\n====================\n\n";
                  let totalAmount = 0;
                  cart.forEach((item, index) => {
                        orderDetails += `${index+1}. ${item.name}\n   Quantity: ${item.quantity}\n   Price: ${item.totalPrice.toFixed(2)} MAD\n\n`;
                        totalAmount += item.totalPrice;
                  });
                  orderDetails += `\nTotal Amount: ${totalAmount.toFixed(2)} MAD\n\n====================\nThank you for ordering from KFC!`;
                  navigator.clipboard.writeText(orderDetails).then(() => {
                        alert('Order details copied to clipboard!');
                        shareOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                  }).catch(() => alert('Failed to copy.'));
            }
            // ========== أحداث التمرير والفئات ==========
            window.addEventListener('scroll', function() {
                  if (window.scrollY > 100) navbar.classList.add('scrolled');
                  else navbar.classList.remove('scrolled');
            });
            backButton.addEventListener('click', function() {
                  window.location.href = 'index.html';
            });
            viewCartBtn.addEventListener('click', () => window.location.href = 'kcheckout.html');
            const categories = document.querySelectorAll('.category');
            const categoriesContainer = document.getElementById('categoriesContainer');
            const categorySections = {
                  chickenMeals: document.getElementById('chickenMealsSection'),
                  hotWings: document.getElementById('hotWingsSection'),
                  loadedBuckets: document.getElementById('loadedBucketsSection'),
                  comboMeals: document.getElementById('comboMealsSection'),
                  familyBuckets: document.getElementById('familyBucketsSection'),
                  // إضافة القسمين الجديدين
                  sides: document.getElementById('sidesSection'),
                  drinks: document.getElementById('drinksSection')
            };

            function updateActiveCategory(categoryId) {
                  categories.forEach(c => {
                        c.classList.remove('active');
                        if (c.getAttribute('data-category') === categoryId) {
                              c.classList.add('active', 'category-switch-animation');
                              setTimeout(() => c.classList.remove('category-switch-animation'), 600);
                              const containerWidth = categoriesContainer.offsetWidth;
                              const categoryLeft = c.offsetLeft;
                              const categoryWidth = c.offsetWidth;
                              categoriesContainer.scrollTo({
                                    left: categoryLeft - (containerWidth / 2) + (categoryWidth / 2),
                                    behavior: 'smooth'
                              });
                        }
                  });
            }
            const observer = new IntersectionObserver((entries) => {
                  entries.forEach(entry => {
                        if (entry.isIntersecting) {
                              const sectionId = entry.target.id;
                              let categoryKey = sectionId.replace('Section', '');
                              updateActiveCategory(categoryKey);
                              entry.target.classList.add('visible');
                        }
                  });
            }, {
                  root: null,
                  rootMargin: '-100px 0px -50% 0px',
                  threshold: 0.1
            });
            Object.values(categorySections).forEach(s => {
                  if (s) observer.observe(s);
            });
            categories.forEach(c => {
                  c.addEventListener('click', function() {
                        const categoryId = this.getAttribute('data-category');
                        updateActiveCategory(categoryId);
                        if (categorySections[categoryId]) categorySections[categoryId].scrollIntoView({
                              behavior: 'smooth'
                        });
                  });
            });

            function hasCustomizations(productName) {
                  const product = productsData[productName];
                  if (!product) return false;
                  // إذا كان هناك totalPieces أو customizations معقدة نعتبر أن له تخصيصات
                  return product.totalPieces || (product.customizations && (product.customizations.extras?.length > 0 || product.customizations.flavour || product.customizations.drinks));
            }

            function markProductsWithCustomizations() {
                  document.querySelectorAll('.category-item').forEach(card => {
                        const addButton = card.querySelector('.item-add-btn');
                        if (addButton) {
                              const productName = addButton.getAttribute('data-name');
                              if (hasCustomizations(productName)) {
                                    card.classList.add('has-customizations');
                              } else {
                                    card.classList.remove('has-customizations');
                              }
                        }
                  });
            }
            // التهيئة
            document.addEventListener('DOMContentLoaded', function() {
                  initCart();
                  markProductsWithCustomizations();
                  document.querySelectorAll('.item-add-btn').forEach(btn => {
                        btn.addEventListener('click', function(e) {
                              e.stopPropagation();
                              const rect = this.getBoundingClientRect();
                              lastClickedAddRect = {
                                    left: rect.left,
                                    top: rect.top,
                                    width: rect.width,
                                    height: rect.height
                              };
                              const name = this.getAttribute('data-name');
                              if (name) openModal(name);
                        });
                  });
            });
      </script>
</body>

</html>
